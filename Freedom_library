local Library = {}
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

-- Dragging System
function Library:EnableDragging(frame)
    local dragging, dragStart, startPos

    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        end
    end)

    frame.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
end

-- Create Main Window
function Library:CreateWindow(title)
    local ScreenGui = Instance.new("ScreenGui")
    local MainFrame = Instance.new("Frame")
    local TitleBar = Instance.new("TextLabel")

    ScreenGui.Name = "UI_Library"
    ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

    MainFrame.Name = "MainFrame"
    MainFrame.Parent = ScreenGui
    MainFrame.Size = UDim2.new(0, 450, 0, 550)
    MainFrame.Position = UDim2.new(0.5, -225, 0.5, -275)
    MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    MainFrame.BorderSizePixel = 0
    MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)

    TitleBar.Name = "TitleBar"
    TitleBar.Parent = MainFrame
    TitleBar.Size = UDim2.new(1, 0, 0, 30)
    TitleBar.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    TitleBar.Text = title or "Orion UI"
    TitleBar.TextColor3 = Color3.fromRGB(255, 255, 255)
    TitleBar.Font = Enum.Font.GothamBold
    TitleBar.TextSize = 16
    TitleBar.BorderSizePixel = 0

    self:EnableDragging(MainFrame)

    return MainFrame
end

-- Add Tab System
function Library:AddTab(parent, tabs)
    local TabContainer = Instance.new("Frame")
    TabContainer.Name = "TabContainer"
    TabContainer.Parent = parent
    TabContainer.Size = UDim2.new(1, 0, 0, 30)
    TabContainer.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    TabContainer.BorderSizePixel = 0

    local TabButtons = {}
    local TabPages = {}

    for _, tabName in pairs(tabs) do
        local TabButton = Instance.new("TextButton")
        TabButton.Parent = TabContainer
        TabButton.Size = UDim2.new(1 / #tabs, 0, 1, 0)
        TabButton.Text = tabName
        TabButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        TabButton.Font = Enum.Font.Gotham
        TabButton.TextSize = 14

        local TabPage = Instance.new("Frame")
        TabPage.Name = tabName
        TabPage.Parent = parent
        TabPage.Size = UDim2.new(1, 0, 1, -30)
        TabPage.Position = UDim2.new(0, 0, 0, 30)
        TabPage.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        TabPage.BorderSizePixel = 0
        TabPage.Visible = false

        TabButton.MouseButton1Click:Connect(function()
            for _, page in pairs(TabPages) do
                page.Visible = false
            end
            TabPage.Visible = true
        end)

        table.insert(TabButtons, TabButton)
        table.insert(TabPages, TabPage)
    end

    TabPages[1].Visible = true -- Show first tab by default
    return TabPages
end

-- Add Component Function
function Library:AddButton(parent, text, callback)
    local Button = Instance.new("TextButton")
    Button.Parent = parent
    Button.Size = UDim2.new(0.8, 0, 0, 40)
    Button.Position = UDim2.new(0.1, 0, 0.1, 0)
    Button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    Button.Text = text
    Button.TextColor3 = Color3.fromRGB(255, 255, 255)
    Button.Font = Enum.Font.Gotham
    Button.TextSize = 14

    Button.MouseButton1Click:Connect(function()
        if callback then callback() end
    end)
end

function Library:AddToggle(parent, text, default, callback)
    local Frame = Instance.new("Frame")
    local Label = Instance.new("TextLabel")
    local ToggleButton = Instance.new("TextButton")

    Frame.Parent = parent
    Frame.Size = UDim2.new(0.8, 0, 0, 40)
    Frame.Position = UDim2.new(0.1, 0, 0.2, 0)
    Frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    Frame.BorderSizePixel = 0

    Label.Parent = Frame
    Label.Size = UDim2.new(0.7, 0, 1, 0)
    Label.Text = text
    Label.TextColor3 = Color3.fromRGB(255, 255, 255)
    Label.Font = Enum.Font.Gotham
    Label.TextSize = 14

    ToggleButton.Parent = Frame
    ToggleButton.Size = UDim2.new(0.3, 0, 1, 0)
    ToggleButton.Position = UDim2.new(0.7, 0, 0, 0)
    ToggleButton.Text = default and "ON" or "OFF"
    ToggleButton.BackgroundColor3 = default and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(200, 0, 0)
    ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    ToggleButton.Font = Enum.Font.Gotham
    ToggleButton.TextSize = 14

    ToggleButton.MouseButton1Click:Connect(function()
        default = not default
        ToggleButton.Text = default and "ON" or "OFF"
        ToggleButton.BackgroundColor3 = default and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(200, 0, 0)
        if callback then callback(default) end
    end)
end

-- Add More Components: Dropdown, Slider, Notification, etc.

return Library